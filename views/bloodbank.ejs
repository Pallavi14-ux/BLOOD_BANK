<!DOCTYPE html> 
<html lang="en"> 
    <head>
         <meta charset="UTF-8"> 
         <title>Blood Bank Records</title> 
         <script src="https://cdn.tailwindcss.com"></script>
         </head>
          <body class="bg-gray-100 min-h-screen flex flex-col items-center py-10"> 
            <h1 class="text-6xl italic text-red-900 font-bold font-serif text-center mb-6"> Blood Bank Records </h1>
             <a href="/dashboard" class="mb-8 px-6 py-2 bg-blue-600 text-white rounded-full shadow hover:bg-blue-700 transition transform hover:-translate-y-1"> ← Back to Dashboard </a> 
             <div class="w-full max-w-lg bg-white p-6 rounded-lg shadow-md mb-10"> 
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">Add Blood Bank Record</h2> 
                <form action="/bloodbank/add" method="POST" class="flex flex-col space-y-4"> 
                    <select name="blood_id" required class="p-2 border rounded"> 
                        <option value="" disabled selected>Select Blood Unit</option> 
                        <% (blood || []).forEach(b => { %> 
                            <option value="<%= b.BLOOD_ID %>"> <%= b.BLOOD_ID %> - <%= b.BLOOD_GROUP %> </option> 
                            <% }) %>
                         </select> 
                         <input type="number" step="0.01" name="quantity" placeholder="Quantity (ml)" required class="p-2 border rounded">
                          <input type="date" name="collection_date" class="p-2 border rounded"> 
                          <input type="date" name="expiry_date" required class="p-2 border rounded"> 
                          <button type="submit" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition"> Add Record </button> 
                        </form>
                     </div> 
                     <div class="w-full max-w-6xl overflow-x-auto"> 
                        <h2 class="text-2xl font-semibold text-gray-800 mb-4">All Blood Bank Records</h2> 
                        <table class="min-w-full bg-white rounded-lg shadow-md"> 
                            <thead class="bg-red-700 text-white">
                                 <tr> 
                                    <th class="px-4 py-2">Stock ID</th>
                                     <th class="px-4 py-2">Blood ID</th> 
                                     <th class="px-4 py-2">Blood Group</th> 
                                     <th class="px-4 py-2">Quantity (ml)</th> 
                                     <th class="px-4 py-2">Collection Date</th>
                                      <th class="px-4 py-2">Expiry Date</th> 
                                      <th class="px-4 py-2">Action</th> 
                                    </tr> 
                                </thead> 
                                <tbody class="text-gray-700"> <% (bloodbank || []).forEach(item => { %> 
                                    <tr class="border-b hover:bg-gray-100"> 
                                        <td class="px-4 py-2 text-center"><%= item.BLOOD_STOCK_ID %></td> 
                                        <td class="px-4 py-2 text-center"><%= item.BLOOD_ID %></td> 
                                        <td class="px-4 py-2 text-center"><%= item.AVAILABLE_BLOOD_GROUP %></td> 
                                        <td class="px-4 py-2 text-center"><%= item.QUANTITY %></td> 
                                        <td class="px-4 py-2 text-center"> <%= item.COLLECTION_DATE ? new Date(item.COLLECTION_DATE).toISOString().split('T')[0] : '—' %> </td>
                                         <td class="px-4 py-2 text-center"> <%= item.EXPIRY_DATE ? new Date(item.EXPIRY_DATE).toISOString().split('T')[0] : '—' %> </td>
                                          <td class="px-4 py-2 text-center"> 
                                            <form action="/bloodbank/delete/<%= item.BLOOD_STOCK_ID %>" method="POST">
                                                 <button type="submit" class="bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 transition"> Delete </button>
                                         </form>
                                         </td> 
                                        </tr>
                                         <% }) %> 
                                        </tbody> 
                                    </table> 
                                </div>
                             </body> 
                             </html>